FROM python:3


ENV PYTHONBUFFERED=1

# ARG EMAIL_USERNAME
# ARG EMAIL_PASSWORD

# ARG SECRET_KEY
# ARG DEBUG
# ARG ALLOWED_HOSTS

# ARG DATABASE_NAME
# ARG DATABASE_USERNAME
# ARG DATABASE_PASSWORD
# ARG DATABASE_HOST
# ARG DATABASE_PORT

# ARG AWS_ACCESS_KEY_ID
# ARG AWS_SECRET_ACCESS_KEY
# ARG AWS_STORAGE_BUCKET_NAME
# ARG AWS_S3_REGION_NAME
# ARG AWS_LOCATION

# ARG CELERY_BROKER_URL

# ARG CORS_ALLOWED_ORIGINS

# ENV EMAIL_USERNAME $EMAIL_USERNAME
# ENV EMAIL_PASSWORD $EMAIL_PASSWORD

# ENV SECRET_KEY $SECRET_KEY
# ENV DEBUG $DEBUG
# ENV ALLOWED_HOSTS $ALLOWED_HOSTS

# ENV DATABASE_NAME $DATABASE_NAME
# ENV DATABASE_USERNAME $DATABASE_USERNAME
# ENV DATABASE_PASSWORD $DATABASE_PASSWORD
# ENV DATABASE_HOST $DATABASE_HOST
# ENV DATABASE_PORT $DATABASE_PORT

# ENV AWS_ACCESS_KEY_ID $AWS_ACCESS_KEY_ID
# ENV AWS_SECRET_ACCESS_KEY $AWS_SECRET_ACCESS_KEY
# ENV AWS_STORAGE_BUCKET_NAME $AWS_STORAGE_BUCKET_NAME
# ENV AWS_S3_REGION_NAME $AWS_S3_REGION_NAME
# ENV AWS_LOCATION $AWS_LOCATION

# ENV CELERY_BROKER_URL $CELERY_BROKER_URL

# ENV CORS_ALLOWED_ORIGINS $CORS_ALLOWED_ORIGINS


RUN mkdir /api
WORKDIR /api/
COPY requirements.txt /api/
EXPOSE 8000
RUN pip install -r requirements.txt
COPY . /api/
RUN python manage.py makemigrations
RUN python manage.py migrate

